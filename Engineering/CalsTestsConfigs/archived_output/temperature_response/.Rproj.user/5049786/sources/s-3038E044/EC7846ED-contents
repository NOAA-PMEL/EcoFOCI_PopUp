#The end goal of this script is to calculate temperature response time (tau)
#tau is also known as a thermal time constant

#somebackground on thermal time constants:
#https://www.ametherm.com/blog/thermistors/thermal-time-constant-ntc-thermistors
#and how to estimate them based on data:
#https://www.youtube.com/watch?v=DuurWhoyb-o


require("ggplot2")

#import dataset


#rename column headers
tempresp$millis <- tempresp$V1 - 9737
tempresp$tempC  <- tempresp$V2

#variables

#t1 is the initial ambient body temperature in celsius
t1 <- 19.1
#t2 is the final ambient body temperature in celsius
t2 <- 2.9

#graph 
graph <- plot(x=tempresp$millis, y=tempresp$tempC, 
              xlab= "time in milliseconds", ylab= "temperature in celsius")

#thermal time constant, solved for tau(seconds)
tau <- (t2 - t1) * (1 - exp(-1)) + t1
tau

tempresp$model <- ((t2-t1) * (1 - exp(-tempresp$millis/tau)) + t1)

  

